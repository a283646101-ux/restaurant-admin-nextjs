# 使用说明

## 🎯 这是什么？

这是一个**完整的、可直接使用的**餐饮后台管理系统，基于 Next.js 14 + Supabase 构建。

## ✅ 已完成的功能

### 核心功能
- ✅ 管理员登录
- ✅ 仪表板（数据统计）
- ✅ 菜品管理（增删改查）
- ✅ 订单管理（查看、更新状态）
- ✅ 用户管理（查看、筛选）

### 技术特性
- ✅ 完整的数据库架构（16张表）
- ✅ RESTful API 接口
- ✅ TypeScript 类型安全
- ✅ 响应式设计
- ✅ 详细文档

## 📁 如何使用？

### 方式一：在当前位置使用

```bash
# 1. 进入项目目录
cd restaurant-admin-nextjs

# 2. 安装依赖
npm install

# 3. 配置环境变量（见下方）

# 4. 启动开发服务器
npm run dev
```

### 方式二：复制到其他位置

```bash
# 1. 复制整个文件夹到你想要的位置
cp -r restaurant-admin-nextjs /你的目标路径/

# 2. 进入新位置
cd /你的目标路径/restaurant-admin-nextjs

# 3. 安装依赖
npm install

# 4. 配置环境变量（见下方）

# 5. 启动开发服务器
npm run dev
```

## 🔧 配置步骤

### 1. 创建 Supabase 项目

1. 访问 https://supabase.com/
2. 注册/登录
3. 创建新项目
4. 记录以下信息：
   - Project URL
   - Anon Key  
   - Service Role Key

### 2. 初始化数据库

1. 在 Supabase 控制台，进入 "SQL Editor"
2. 复制 `supabase/migrations/001_initial_schema.sql` 的内容
3. 粘贴并执行
4. 确认所有表创建成功

### 3. 创建管理员账号

在 SQL Editor 中执行：

```sql
INSERT INTO admins (email, password_hash, name, role, status)
VALUES (
  'admin@example.com',
  'admin123',
  '超级管理员',
  'super_admin',
  'active'
);
```

### 4. 配置环境变量

创建 `.env.local` 文件：

```bash
cp .env.local.example .env.local
```

编辑 `.env.local`，填入你的 Supabase 信息：

```env
NEXT_PUBLIC_SUPABASE_URL=你的_supabase_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=你的_anon_key
SUPABASE_SERVICE_ROLE_KEY=你的_service_role_key
NEXT_PUBLIC_APP_URL=http://localhost:3000
```

### 5. 启动项目

```bash
npm run dev
```

访问 http://localhost:3000

**登录信息：**
- 邮箱: admin@example.com
- 密码: admin123

## 📚 文档导航

### 新手必读
1. **[QUICKSTART.md](./QUICKSTART.md)** - 5分钟快速开始
2. **[README.md](./README.md)** - 完整项目说明

### 进阶阅读
3. **[PROJECT_OVERVIEW.md](./PROJECT_OVERVIEW.md)** - 技术架构详解
4. **[DEPLOYMENT.md](./DEPLOYMENT.md)** - 生产环境部署

### 开发参考
5. **[完成总结.md](./完成总结.md)** - 已完成功能清单

## 🎨 界面预览

### 登录页
- 简洁的登录表单
- 错误提示
- 默认账号提示

### 仪表板
- 4个统计卡片
- 营收概览
- 快速操作

### 菜品管理
- 菜品列表表格
- 分类/状态筛选
- 编辑/删除操作

### 订单管理
- 订单卡片列表
- 订单详情
- 状态更新

### 用户管理
- 用户列表表格
- 会员等级展示
- 消费统计

## 🔌 API 接口

### 认证
- `POST /api/auth/login` - 登录

### 菜品
- `GET /api/dishes` - 获取列表
- `POST /api/dishes` - 创建
- `GET /api/dishes/:id` - 获取详情
- `PUT /api/dishes/:id` - 更新
- `DELETE /api/dishes/:id` - 删除

### 订单
- `GET /api/orders` - 获取列表
- `GET /api/orders/:id` - 获取详情
- `PUT /api/orders/:id` - 更新状态

### 用户
- `GET /api/users` - 获取列表

### 统计
- `GET /api/analytics` - 获取统计数据

## 🚀 部署到生产环境

### Vercel 部署（推荐）

1. 推送代码到 GitHub
2. 在 Vercel 导入项目
3. 配置环境变量
4. 点击部署

详见 [DEPLOYMENT.md](./DEPLOYMENT.md)

## ⚠️ 注意事项

### 安全提示

1. **密码加密**: 当前密码未加密，仅用于演示。生产环境请使用 bcrypt。
2. **JWT 认证**: 建议实现 JWT token 认证机制。
3. **环境变量**: 不要将 `.env.local` 提交到 Git。
4. **HTTPS**: 生产环境必须使用 HTTPS。

### 开发建议

1. 使用 VS Code 编辑器
2. 安装 ESLint 和 Prettier 插件
3. 遵循 TypeScript 类型定义
4. 参考现有代码风格

## 🐛 常见问题

### Q1: 数据库连接失败？
**A**: 检查 `.env.local` 中的 Supabase 配置是否正确。

### Q2: 登录失败？
**A**: 确认已在数据库中创建管理员账号。

### Q3: 页面显示空白？
**A**: 打开浏览器控制台查看错误信息。

### Q4: npm install 失败？
**A**: 尝试清除缓存：`npm cache clean --force`

## 📞 获取帮助

如果遇到问题：

1. 查看文档中的常见问题部分
2. 检查浏览器控制台的错误信息
3. 查看 Supabase 控制台的日志
4. 联系开发者获取支持

## 🎉 开始使用

现在你可以：

1. ✅ 启动开发服务器
2. ✅ 登录管理后台
3. ✅ 管理菜品、订单、用户
4. ✅ 查看数据统计
5. ✅ 根据需求扩展功能

**祝你使用愉快！** 🚀

---

**版本**: 1.0.0  
**更新时间**: 2025-01-18  
**状态**: ✅ 可用
